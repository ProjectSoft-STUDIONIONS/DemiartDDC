Math.inInterval=Math.inInterval||function(a,b,c){return Math.min(c,Math.max(b,a))},window.lang={get:function(a){return chrome.i18n.getMessage(a)}},window._helper={pack:function(a){return JSON.stringify(a)},unpack:function(a){try{return JSON.parse(a)}catch(b){return null}},isNumber:function(a){return!isNaN(parseFloat(a))&&isFinite(a)&&!this.isString&&!this.isBoolean&&!this.isObject&&!this.isArray},isArray:function(a){return!this.isNull(a)&&"[object Array]"===Object.prototype.toString.call(a)},isObject:function(a){return!this.isEmpty(a)&&"object"==typeof a},isBoolean:function(a){return"boolean"==typeof a},isString:function(a){return"string"==typeof a},isNull:function(a){return void 0===a||null===a},isEmpty:function(a){return this.isNull(a)||"undefined"!=typeof a.length&&0==a.length}},window.storage={get:function(a,b,c){var d="undefined"==typeof localStorage[a]||"null"==typeof localStorage[a]?_helper.pack(b):localStorage[a];switch(d=null==_helper.unpack(d)?b:_helper.unpack(d),c){case"number":(_helper.isNull(d)||_helper.isEmpty(d))&&(d=0),_helper.isNumber(d)||(d=parseFloat(d)),this.set(a,d);break;case"boolean":d=_helper.isBoolean(d)?d:!!b,this.set(a,d);break;case"object":case"array":d=_helper.isObject(d)||_helper.isArray(d)?d:"array"==c?[]:{},this.set(a,d);break;default:this.set(a,d)}return d},set:function(a,b){b=_helper.pack(b),localStorage[a]=b}},window.options={get refreshInterval(){return storage.get("refresh_interval",.1666666666666667,"number")},get audioOn(){return storage.get("audioOn",!0,"boolean")},get showContext(){return storage.get("showContext",!0,"boolean")},get refreshSoundFile(){return storage.get("refresh_sound_file","assets/sound/click.ogg","string")},get urlForum(){return storage.get("url_forum","://demiart.ru/forum/","string")},get refreshDate(){return storage.get("refresh_date",(new Date).getFullYear(),"number")},get viewTab(){return storage.get("viewtab",!0,"boolean")},get sounVolume(){return storage.get("sounVolume",.5,"number")},get favicon(){return storage.get("favicon",!0,"boolean")},get demiColor(){return storage.get("demiColor",!0,"boolean")},get protocolForum(){return storage.get("protocol","https","string")},set refreshInterval(a){storage.set("refresh_interval",a)},set audioOn(a){storage.set("audioOn",a)},set showContext(a){storage.set("showContext",a)},set refreshSoundFile(a){storage.set("refresh_sound_file",a)},set urlForum(a){storage.set("url_forum",a)},set refreshDate(a){storage.set("refresh_date",a)},set viewTab(a){storage.set("viewtab",a)},set sounVolume(a){a=Math.inInterval(a,0,1),storage.set("sounVolume",a)},set favicon(a){storage.set("favicon",a)},set demiColor(a){storage.set("demiColor",a)},set protocolForum(a){storage.set("protocol",a)}},window.soundList=[{name:lang.get("defaulSound"),value:"assets/sound/click.ogg",id:"click"},{name:lang.get("messengerSound"),value:"assets/sound/ding.ogg",id:"ding"},{name:lang.get("alarmSound"),value:"assets/sound/alert-0000.ogg",id:"alert-0000"},{name:lang.get("water1Sound"),value:"assets/sound/water-0000.ogg",id:"water-0000"},{name:lang.get("water2Sound"),value:"assets/sound/water-0001.ogg",id:"water-0001"},{name:lang.get("water3Sound"),value:"assets/sound/water-0002.ogg",id:"water-0002"},{name:lang.get("android1Sound"),value:"assets/sound/android-0000.ogg",id:"android-0000"},{name:lang.get("android2Sound"),value:"assets/sound/android-0001.ogg",id:"android-0001"},{name:lang.get("android3Sound"),value:"assets/sound/android-0002.ogg",id:"android-0002"},{name:lang.get("android4Sound"),value:"assets/sound/android-0003.ogg",id:"android-0003"},{name:lang.get("android5Sound"),value:"assets/sound/animal-0000.ogg",id:"animal-0000"},{name:lang.get("kickSound"),value:"assets/sound/kick-0000.ogg",id:"kick-0000"},{name:lang.get("laser1Sound"),value:"assets/sound/lazer-0000.ogg",id:"lazer-0000"},{name:lang.get("laser2Sound"),value:"assets/sound/lazer-0001.ogg",id:"lazer-0001"},{name:lang.get("sequence1Sound"),value:"assets/sound/sequence-0000.ogg",id:"sequence-0000"},{name:lang.get("sequence2Sound"),value:"assets/sound/sequence-0001.ogg",id:"sequence-0001"},{name:lang.get("sundry1Sound"),value:"assets/sound/misc-0000.ogg",id:"misc-0000"},{name:lang.get("sundry2Sound"),value:"assets/sound/misc-0001.ogg",id:"misc-0001"},{name:lang.get("sundry3Sound"),value:"assets/sound/misc-0002.ogg",id:"misc-0002"},{name:lang.get("sundry4Sound"),value:"assets/sound/animal-0001.ogg",id:"animal-0001"},{name:lang.get("chat1Sound"),value:"assets/sound/sound_1.ogg",id:"sound_1"},{name:lang.get("chat2Sound"),value:"assets/sound/sound_2.ogg",id:"sound_2"},{name:lang.get("chat3Sound"),value:"assets/sound/sound_3.ogg",id:"sound_3"},{name:lang.get("chat4Sound"),value:"assets/sound/sound_4.ogg",id:"sound_4"},{name:lang.get("chat5Sound"),value:"assets/sound/sound_5.ogg",id:"sound_5"},{name:lang.get("chat6Sound"),value:"assets/sound/sound_6.ogg",id:"sound_6"}],window.urlList=[{optiongroup:"Форум",options:[{name:"Главная страница форума",value:"://demiart.ru/forum/index.php"},{name:"Раздел «Photoshop»",value:"://demiart.ru/forum/index.php?act=SC&c=2"},{name:"Раздел «Art»",value:"://demiart.ru/forum/index.php?act=SC&c=3"},{name:"Раздел «Фото»",value:"://demiart.ru/forum/index.php?act=SC&c=11"},{name:"Раздел «Креатив и Созидание»",value:"://demiart.ru/forum/index.php?act=SC&c=9"},{name:"Раздел «Векторные редакторы»",value:"://demiart.ru/forum/index.php?act=SC&c=8"},{name:"Раздел «Flash»",value:"://demiart.ru/forum/index.php?act=SC&c=13"},{name:"Раздел «Handmade. Декоративно-прикладное искусство.»",value:"://demiart.ru/forum/index.php?act=SC&c=18"},{name:"Раздел «Изо»",value:"://demiart.ru/forum/index.php?act=SC&c=15"},{name:"Раздел «3D редакторы»",value:"://demiart.ru/forum/index.php?act=SC&c=10"},{name:"Раздел «Обработка и создание Видео»",value:"://demiart.ru/forum/index.php?act=SC&c=6"},{name:"Раздел «Фракталы»",value:"://demiart.ru/forum/index.php?act=SC&c=19"},{name:"Раздел «Painter и Планшеты»",value:"://demiart.ru/forum/index.php?act=SC&c=17"},{name:"Раздел «Музыка»",value:"://demiart.ru/forum/index.php?act=SC&c=14"},{name:"Раздел «Литература»",value:"://demiart.ru/forum/index.php?act=SC&c=16"},{name:"Раздел «Компьютерные программы»",value:"://demiart.ru/forum/index.php?act=SC&c=20"},{name:"Раздел «Работа»",value:"://demiart.ru/forum/index.php?act=SC&c=21"},{name:"Раздел «Соревнования»",value:"://demiart.ru/forum/index.php?act=SC&c=7"},{name:"Раздел «НАШЕ ВСЁ»",value:"://demiart.ru/forum/index.php?act=SC&c=4"}]},{optiongroup:"Гильдии",options:[{name:"Главная страница Гильдий",value:"://demiart.ru/forum/index.php?act=SC&c=12"},{name:"Форум гильдии Темных",value:"://demiart.ru/forum/index.php?showforum=53"},{name:"Форум гильдии Фантазеров",value:"://demiart.ru/forum/index.php?showforum=56"},{name:"Форум гильдии Фотографов",value:"://demiart.ru/forum/index.php?showforum=60"},{name:"Форум гильдии новичков",value:"://demiart.ru/forum/index.php?showforum=62"},{name:"Форум гильдии Светлых",value:"://demiart.ru/forum/index.php?showforum=63"},{name:"Форум гильдии Вампиров",value:"://demiart.ru/forum/index.php?showforum=68"},{name:"Форум гильдии мир анимэ и манги",value:"://demiart.ru/forum/index.php?showforum=69"},{name:"Форум гильдии Художников",value:"://demiart.ru/forum/index.php?showforum=74"},{name:"Форум гильдии Живописцев",value:"://demiart.ru/forum/index.php?showforum=77"},{name:"Форум гильдии бездельников",value:"://demiart.ru/forum/index.php?showforum=79"},{name:"Форум гильдии Графиков",value:"://demiart.ru/forum/index.php?showforum=84"},{name:"Форум гильдии Фотоарта",value:"://demiart.ru/forum/index.php?showforum=89"},{name:"Форум гильдии Векторщиков",value:"://demiart.ru/forum/index.php?showforum=92"},{name:"Форум гильдии NuArt",value:"://demiart.ru/forum/index.php?showforum=112"},{name:"Форум гильдии Мафии",value:"://demiart.ru/forum/index.php?showforum=114"},{name:"Форум гильдии Трёхмерщиков",value:"://demiart.ru/forum/index.php?showforum=115"},{name:"Форум гильдии Оригиналов",value:"://demiart.ru/forum/index.php?showforum=116"},{name:"Форум гильдии Фрактальщиков",value:"://demiart.ru/forum/index.php?showforum=122"},{name:"Форум гильдии Комиксов",value:"://demiart.ru/forum/index.php?showforum=123"},{name:"Форум гильдии Анималистов",value:"://demiart.ru/forum/index.php?showforum=125"},{name:"Форум гильдии Лингвистов",value:"://demiart.ru/forum/index.php?showforum=126"}]}],function(){var a="undefined"!=typeof chrome?chrome.extension.getBackgroundPage():opera.extension.bgProcess,b=0,c=document.getElementById("playButton"),d=document.getElementById("sounds"),e=document.getElementById("urls"),f=new Audio,h=document.getElementById("volumeCombobox"),i=document.getElementById("demicolor"),j=chrome.runtime.getManifest(),k=j.name+" v"+j.version+" & DemiColor v"+a.demiColorVer;g=function(a){return document.getElementById("neonlight"+a)},w=function(){if(0==b)for(m=0;21>m;m++)g(m).style.color="white";g(b).style.color="#E7AA11",0<b&&(g(b-1).style.color="#F5D681"),5<b&&(g(b-1-5).style.color="white"),20>b?b++:(b=0,clearInterval(flashing),setTimeout(p,0))},p=function(){flashing=setInterval(w,20)},t=function(){return window.close(),!1},document.addEventListener("DOMContentLoaded",function(){document.title=k;var a,b,g=function(a){a?f.paused?(f.volume=h.value,f.pause(),f.src=d.value,c.className="forminput play",f.play()):(f.pause(),f.currentTime=0,c.className="forminput stop"):(f.volume=h.value,f.pause(),f.src=d.value,c.className="forminput play",f.play())},i=options.refreshInterval,j=options.protocolForum;for(b=document.getElementById("interval"),q=0;q<b.children.length;q++)if(a=b.children[q],a.value==i){a.selected="true";break}for(b=document.getElementById("protocol"),q=0;q<b.children.length;q++)if(a=b.children[q],a.value==j){a.selected="true";break}var l=document.getElementById("audio_checkbox"),m=document.getElementById("tab_checkbox"),a=options.sounVolume,b=options.refreshSoundFile,i=options.urlForum,n=document.getElementById("menu_context"),o=document.getElementById("demicolor"),p=document.getElementById("favicon"),q=0;for(l.checked=options.audioOn,m.checked=options.viewTab,n.checked=options.showContext,p.checked=options.favicon,o.checked=options.demiColor;1>q;)q+=.05,q=Number(q.toFixed(3)),l=document.createElement("option"),l.value=q,l.innerHTML=Math.round(100*q)+"%",h.appendChild(l),l.value==a&&(l.selected="true");for(q=0;q<soundList.length;++q)a=document.createElement("option"),a.value=soundList[q].value,a.innerHTML=soundList[q].name,d.appendChild(a),a.value===b&&(a.selected="true");for(q=0;q<urlList.length;++q){for(b=document.createElement("optgroup"),a=urlList[q],b.label=a.optiongroup,l=0;l<a.options.length;++l)m=a.options[l],n=document.createElement("option"),n.value=m.value,n.innerHTML=m.name,b.appendChild(n),n.value==i&&(n.selected="true");e.appendChild(b)}document.querySelector("#sounds").addEventListener("change",function(){g(!1)}),document.querySelector("#playButton").addEventListener("click",function(){g(!0)}),document.querySelector("#volumeCombobox").addEventListener("change",function(){g(!1)}),document.getElementById("year").innerHTML=" ‒ "+options.refreshDate,document.getElementById("nameext").innerText=k}),document.querySelector("#save").addEventListener("click",function(){var b=document.getElementById("interval"),c=document.getElementById("audio_checkbox"),f=document.getElementById("tab_checkbox"),g=document.getElementById("menu_context"),j=document.getElementById("favicon"),k=document.getElementById("protocol"),l=b.children[b.selectedIndex].value,m=k.children[k.selectedIndex].value,n=e.value;options.protocolForum=m,options.favicon=j.checked,options.refreshSoundFile=d.children[d.selectedIndex].value,options.refreshInterval=parseFloat(l),options.urlForum=n,options.audioOn=c.checked,options.viewTab=f.checked,options.showContext=g.checked,options.sounVolume=h.value,options.demiColor=i.checked,document.getElementById("options").style.display="none",document.getElementById("flashing").style.display="block",p(),setTimeout(t,2500),a.resetOptions()}),document.querySelector("#closed").addEventListener("click",t),f.addEventListener("ended",function(){c.className="forminput stop"}),document.oncontextmenu=function(){}}();